{% extends "base.html" %}
{% block content %}
<div class="card">
  <h3>Filters</h3>
  <div>
    <a class="badge" href="/vulnerable?critical=1">Critical (seeders <= 1)</a>
    <a class="badge" href="/vulnerable">All</a>
  </div>
</div>

<table class="table">
  <thead>
    <tr>
      <th>Title</th>
      <th>Size</th>
      <th>Seeders</th>
      <th>Leechers</th>
      <th>Age (days)</th>
      <th>Score</th>
    </tr>
  </thead>
  <tbody>
  {% for row in rows %}
    <tr>
      <td>
        <a href="{{ row.topic_url }}" target="_blank" rel="noreferrer">{{ row.title }}</a>
        {% if row.topic_url in pinned_set or (row.infohash and row.infohash in pinned_set) %}
          <span class="badge">pinned</span>
        {% endif %}
      </td>
      <td>{{ (row.size_bytes / (1024 ** 3)) | round(2) if row.size_bytes else "?" }} GB</td>
      <td>{{ row.seeders }}</td>
      <td>{{ row.leechers }}</td>
      <td class="row-muted">{{ (row.discovered_at or "")[:10] }}</td>
      <td>{{ row.score }}</td>
    </tr>
  {% endfor %}
  </tbody>
</table>
{% endblock %}
